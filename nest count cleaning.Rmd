---
title: "Project Work"
author: "Eleanor and Wriley"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(sf)
library(leaflet)
library(glue)
```

```{r clean-2022}
nest_count_2022 <- read_excel("data/nest_count/nest_count_2022.xlsx", na = "NA")

nest_count_2022 <- nest_count_2022 %>%
  mutate(year = "2022") %>%
  mutate(species = str_extract(comment, "\\d*GBBG|\\d*COEI")) %>%
  mutate(species = str_replace(species, "COEI", "coei")) %>%
  mutate(species = str_replace(species, "GBBG", "gbbg")) %>%
  replace_na(list(species = "herg"))

```

```{r clean-2021}
nest_count_2021 <- read_excel("data/nest_count/nest_count_2021.xlsx", na = "NA")

nest_count_2021 <- nest_count_2021 %>%
  mutate(year = "2021") %>%
    mutate(detect.gbbg = str_detect(comment, "GBBG")) %>% 
    mutate(detect.gbbg.2 = str_detect(`...7`, "GBBG")) %>%
    mutate(detect.coei = str_detect(comment, "eider")) %>%
    mutate(detect.coei.2 = str_detect(`...7`, "COEI")) %>%
    mutate(species = case_when(
      detect.gbbg == "TRUE" | detect.gbbg.2 == "TRUE" ~ "gbbg",
      detect.coei == "TRUE" | detect.coei.2 == "TRUE" ~ "coei")) %>%
  replace_na(list(species = "herg")) %>%
  select(flag, clutch, location, year, species)
```

```{r}
nest_count_2020 <- read_excel("data/nest_count/nest_count_2020.xlsx", na = "NA")
```


```{r}
write.csv(nest_count_2021, "data/nest_count_clean_2021.csv")

write.csv(nest_count_2022, "data/nest_count_clean_2022.csv")

```

